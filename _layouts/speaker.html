{%- assign speaker = page -%}

{%- unless speaker.hide -%}
  {%- include header.html -%}

  <p class="h6">
    {{ site.data.lang[site.conference.lang].speaker.title | default: "Speaker" }}
  </p>

  <h1 class="fw-light mb-3 text-break">
    {{ speaker.first_name }} {{ speaker.last_name }}
  </h1>

  {{ content }}

  {% include get_link_types.html %}

  {% if has_icon_links > 0 %}
    <ul class="list-unstyled">
      {% for link in speaker.links %}
        {% include get_link.html type="icon" %}
        {% if link_valid %}
          {{ link_list_item }}
        {% endif %}
      {% endfor %}
    </ul>
  {% endif %}

  {% if has_regular_links > 0 %}
    <h5 class="mt-4 mb-1">{{ site.data.lang[site.conference.lang].more_information | default: "More Information" }}:</h5>

    <ul class="list-unstyled">
      {% for link in speaker.links %}
        {% include get_link.html %}
        {% if link_valid %}
          {{ link_list_item }}
        {% endif %}
      {% endfor %}
    </ul>
  {% endif %}

  {% assign active_speaker = false %}
  {% for talk in site.talks %}
    {% for speaker_name in talk.speakers %}
      {% if speaker_name == speaker.name %}
        {% assign active_speaker = true %}
        {% break %}
      {% endif %}
    {% endfor %}
  {% endfor %}

  {% if active_speaker %}
    <h5 class="mt-4 mb-2">{{ site.data.lang[site.conference.lang].speaker.talks | default: "Talks at this conference" }}:</h5>

    <div>
    {%- for d in site.data.program.days -%}
      {%- include get_day_hash.html -%}
      {%- for r in d.rooms -%}
        {%- for t in r.talks -%}
          {%- assign talk = site.talks | where: 'name', t.name | first -%}

          {%- for speaker_name in talk.speakers -%}
            {%- if speaker_name == speaker.name -%}

              {%- include get_track_properties.html -%}

              <div class="d-flex flex-row mb-2">
                <div class="me-3">
                  {%- include get_talk_time.html -%}
                  {%- assign talk_time_styleclass = "w-100" -%}
                  {% include show_talk_time.html %}
                </div>
                <div class="flex-grow-1 ps-2 border-4 border-start border-{{ track_color }}-subtle">
                  <span class="me-2">
                    {%- include show_talk.html -%}
                  </span>
                  {%- include show_live_icon.html -%}
                </div>
              </div>
              {%- endif -%}
            {%- endfor -%}
          {%- endfor -%}
        {%- endfor -%}
      {%- endfor -%}
    </div>
  {% endif %}

  <p class="d-print-none mt-5">
    <a href="{{ page.collection | prepend: '/' | prepend: site.baseurl }}" class="btn btn-secondary">
      <i class="bi bi-people" aria-hidden="true"></i>&nbsp;{{ site.data.lang[site.conference.lang].overview | default: "Overview" }}
    </a>
  </p>

  {%- include footer.html -%}
{%- endunless -%}
